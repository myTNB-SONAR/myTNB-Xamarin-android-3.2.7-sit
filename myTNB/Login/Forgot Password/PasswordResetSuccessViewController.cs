using Foundation; using System; using UIKit; using CoreAnimation; using CoreGraphics; using System.Drawing;

namespace myTNB {     public partial class PasswordResetSuccessViewController : UIViewController     {         UIButton btnLogin;         UIView viewContainer;          public bool IsChangePassword = false;         public PasswordResetSuccessViewController(IntPtr handle) : base(handle) { }         public string EmailAddress = string.Empty;          public override void ViewDidLoad()         {             base.ViewDidLoad();              SetupSuperViewBackground();             if (IsChangePassword)
            {                 InitializedSuccessSubviews();             }
            else
            {                 InitializeTemporaryPasswordSubview();             }             SetEvents();         }          public override void ViewWillAppear(bool animated)
        {
            base.ViewWillAppear(animated);             NavigationController.NavigationBar.Hidden = true;
        }          internal void SetupSuperViewBackground()         {             var startColor = myTNBColor.GradientPurpleDarkElement();             var endColor = myTNBColor.GradientPurpleLightElement();              var gradientLayer = new CAGradientLayer();             gradientLayer.Colors = new[] { startColor.CGColor, endColor.CGColor };             gradientLayer.Locations = new NSNumber[] { 0, 1 };             gradientLayer.Frame = View.Bounds;              View.Layer.InsertSublayer(gradientLayer, 0);         }          internal void InitializedSuccessSubviews()         {             viewContainer = new UIView((new CGRect(18, DeviceHelper.IsIphoneX() ? 60 : 36, View.Frame.Width - 36, 235)));             viewContainer.Layer.CornerRadius = 4.0f;             viewContainer.BackgroundColor = UIColor.White;              var imgViewClose = new UIImageView(UIImage.FromBundle("Delete"))             {                 Frame = new CGRect(View.Frame.Width - 59, DeviceHelper.IsIphoneX() ? 76 : 52, 25, 25),                 ContentMode = UIViewContentMode.ScaleAspectFill             };              var imgViewSuccess = new UIImageView(UIImage.FromBundle("Circle-With-Check-Green"))             {                 Frame = new CGRect(View.Frame.Width / 2 - 25, DeviceHelper.IsIphoneX() ? 107 : 83, 50, 50),                 ContentMode = UIViewContentMode.ScaleAspectFill             };              var lblPasswordSuccess = new UILabel             {                 Frame = new CGRect(18, DeviceHelper.IsIphoneX() ? 167 : 143, View.Frame.Width - 36, 18),                 AttributedText = new NSAttributedString(                              "Password Reset Successful",                                font: myTNBFont.MuseoSans16(),                              foregroundColor: myTNBColor.PowerBlue(),                              strokeWidth: 0                             ),                 TextAlignment = UITextAlignment.Center,             };              UIView viewLine = new UIView((new CGRect(32, DeviceHelper.IsIphoneX() ? 200 : 176, View.Frame.Width - 64, 1)));             viewLine.BackgroundColor = myTNBColor.PlatinumGrey();              var lblDescription = new UILabel             {                 Frame = new CGRect(30, DeviceHelper.IsIphoneX() ? 217 : 193, View.Frame.Width - 60, 54),                 AttributedText = new NSAttributedString(                     "Your password has been changed successfully. You may proceed to login with the new password.",                    font: myTNBFont.MuseoSans14(),                  foregroundColor: myTNBColor.TunaGrey(),                  strokeWidth: 0                 ),                 Lines = 0,                 LineBreakMode = UILineBreakMode.WordWrap,                 TextAlignment = UITextAlignment.Center,             };              btnLogin = new UIButton(UIButtonType.Custom);             btnLogin.Frame = new CGRect(18, View.Frame.Height - (DeviceHelper.IsIphoneX() ? 96 : 72), View.Frame.Width - 36, 48);             btnLogin.SetTitle("Login", UIControlState.Normal);             btnLogin.Font = myTNBFont.MuseoSans16();             btnLogin.Layer.CornerRadius = 4.0f;             btnLogin.BackgroundColor = myTNBColor.FreshGreen();              View.AddSubview(viewContainer);             View.AddSubview(imgViewClose);             View.AddSubview(imgViewSuccess);             View.AddSubview(lblPasswordSuccess);             View.AddSubview(viewLine);             View.AddSubview(lblDescription);             View.AddSubview(btnLogin);              UITapGestureRecognizer tap = new UITapGestureRecognizer(() =>             {                 this.DismissViewController(false, null);             });             imgViewClose.AddGestureRecognizer(tap);         }          void InitializeTemporaryPasswordSubview()
        {             viewContainer = new UIView((new CGRect(18, DeviceHelper.IsIphoneX() ? 60 : 36, View.Frame.Width - 36, 265)));             viewContainer.Layer.CornerRadius = 2.0f;             viewContainer.BackgroundColor = UIColor.White;              UIImageView imgSuccess = new UIImageView(new CGRect((viewContainer.Frame.Width / 2) - 25, 24, 50, 50));             imgSuccess.Image = UIImage.FromBundle("Circle-With-Check-Green");              UILabel lblTitle = new UILabel(new CGRect(0, 83, viewContainer.Frame.Width, 18));             lblTitle.Font = myTNBFont.MuseoSans16();             lblTitle.TextColor = myTNBColor.PowerBlue();             lblTitle.Text = "Password Reset Successful";             lblTitle.TextAlignment = UITextAlignment.Center;              UIView viewLine = new UIView((new CGRect(14, 116, viewContainer.Frame.Width - 28, 1)));             viewLine.BackgroundColor = myTNBColor.PlatinumGrey();              string details = string.Format("Log in using the 8-digit temporary\r\npassword that was sent to\r\n{0}." +                                            "\r\n\r\nYou may change your password\r\nafter logging in.", EmailAddress);              UILabel lblDetails = new UILabel(new CGRect(12, 133, viewContainer.Frame.Width - 24, 0));             lblDetails.Font = myTNBFont.MuseoSans14();             lblDetails.TextColor = myTNBColor.TunaGrey();             lblDetails.Text = details;             lblDetails.TextAlignment = UITextAlignment.Center;             lblDetails.Lines = 0;             lblDetails.LineBreakMode = UILineBreakMode.WordWrap;              CGSize newSize = GetLabelSize(lblDetails, lblDetails.Frame.Width, 150);             lblDetails.Frame = new CGRect(lblDetails.Frame.X, lblDetails.Frame.Y                                           , lblDetails.Frame.Width, newSize.Height);              btnLogin = new UIButton(UIButtonType.Custom);             btnLogin.Frame = new CGRect(18, View.Frame.Height - 72, View.Frame.Width - 36, 48);             btnLogin.SetTitle("Proceed to login", UIControlState.Normal);             btnLogin.Font = myTNBFont.MuseoSans16();             btnLogin.Layer.CornerRadius = 4.0f;             btnLogin.BackgroundColor = myTNBColor.FreshGreen();              viewContainer.AddSubviews(new UIView[] { imgSuccess, lblTitle, viewLine, lblDetails });              View.AddSubviews(new UIView[] { viewContainer, btnLogin });         }          internal void SetEvents()         {             btnLogin.TouchUpInside += (sender, e) =>
            {                 UIStoryboard storyBoard = UIStoryboard.FromName("Login", null);                 UIViewController loginVC = storyBoard.InstantiateViewController("LoginViewController") as UIViewController;                 this.ShowViewController(loginVC, this);             };         }          CGSize GetLabelSize(UILabel label, nfloat width, nfloat height)         {             return label.Text.StringSize(label.Font, new SizeF((float)width, (float)height));         }     } }